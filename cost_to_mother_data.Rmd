---
title: "cost_to_mother_data"
author: "Alicia Dagle"
date: "November 23, 2019"
output: github_document
---

```{r}
library(tidyverse)
library(rvest)
library(httr)
```

```{r}
url = "https://www.businessinsider.com/how-much-does-it-cost-to-have-a-baby-2018-4#35-maine-16"

birth_cost_us = read_html(url)

state_vec =
  birth_cost_us %>% 
  html_nodes(".slide-title-text") %>% 
  html_text()

state_vec #THIS NEEDS TO BE CLEANED(GET RID OF NUMBERS)


#this need to be cleaned a lot
all_costs = 
  birth_cost_us %>% 
  html_nodes(".clearfix p+ p") %>% 
  html_text()

```


```{r}
#clean state names
state_vec %>% 
  str_replace(".\\. ","") %>%
  str_replace("[1-9]","")
  
```


Time to clean the cost dataset...this is gonna be fun...

```{r}
cost_df = tibble(
  all_costs
) %>% 
  janitor::clean_names()

cost_df_v1 = cost_df %>% 
    separate(all_costs, into = c("with_ins", "other", "cost_w"), sep = "\\:") %>% 
    separate(other, into = c("without_ins", "cost_wo"), sep = "C-section without insurance" ) %>% 
    separate(without_ins, into = c("without_ins", "cost_wo"), sep = "Vaginal birth without insurance")%>%
mutate(
  type = factor(with_ins), 
  type = recode(type,
    "Vaginal birth with insurance" = "Vaginal_birth",
    "C-section with insurance" = "C-section")
) %>% 
  select(-with_ins, -cost_wo) %>% 
  rename("with_ins" = "cost_w") %>% 
  select(type,with_ins,without_ins)

  

view(cost_df_v1)


  
```



```{r}
#don't worry about this...it isn't working:


```

